{% extends "base.html" %}

{% block title %}{{ profile.first_name }} {{ profile.last_name }} - Gatherly{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <!-- Profile Header -->
        <div class="bg-gradient-to-r from-blue-600 to-blue-800 p-6 text-white">
            <div class="flex flex-col md:flex-row md:items-center">
                <div class="flex items-start justify-between">
                <div class="flex items-center">
                    <div class="flex-shrink-0 h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 text-lg font-bold">
                        {{ profile.first_name[0] }}{{ profile.last_name[0] }}
                    </div>
                    <div class="ml-3">
                        <p class="font-medium">{{ profile.first_name }} {{ profile.last_name }}</p>
                        <p class="text-sm text-gray-600">{{ profile.headline }}</p>
                    </div>
                </div>
                <div class="flex space-x-2">
                    <a href="/profile/{{ profile.id }}" class="text-blue-600 hover:underline text-sm">View Profile</a>
                    <button onclick="startChatWithUser('{{ profile.id }}', '{{ profile.first_name }} {{ profile.last_name }}')" 
                            class="bg-blue-600 text-white px-3 py-1 rounded-md text-sm hover:bg-blue-700 transition-colors">
                        <i class="fas fa-comment-dots mr-1"></i> Chat
                    </button>
                </div>
            </div>
                </div>
            </div>
        </div>

        <div class="p-6">
            <!-- Meeting Preparation Section -->
            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6 rounded">
                <div class="flex">
                    <div class="flex-shrink-0">
                        <svg class="h-5 w-5 text-yellow-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                        </svg>
                    </div>
                    <div class="ml-3">
                        <h3 class="text-sm font-medium text-yellow-800">Meeting Preparation Notes</h3>
                        <div class="mt-2 text-sm text-yellow-700">
                            <p>{{ profile.prep_notes }}</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Profile Sections -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Left Column -->
                <div class="md:col-span-2 space-y-6">
                    <!-- About -->
                    <div>
                        <h2 class="text-lg font-semibold text-gray-900 border-b pb-2 mb-3">About</h2>
                        <p class="text-gray-700">{{ profile.summary }}</p>
                    </div>

                    <!-- Experience -->
                    <div>
                        <h2 class="text-lg font-semibold text-gray-900 border-b pb-2 mb-3">Experience</h2>
                        <ul class="space-y-4">
                            {% for exp in profile.experience.split('; ') %}
                            <li class="border-l-4 border-blue-200 pl-4 py-1">
                                <p class="font-medium text-gray-900">{{ exp }}</p>
                                <p class="text-sm text-gray-600">Company Name</p>
                                <p class="text-xs text-gray-500">Jan 2020 - Present Â· 3 yrs</p>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>

                <!-- Right Column -->
                <div class="space-y-6">
                    <!-- Education -->
                    <div>
                        <h2 class="text-lg font-semibold text-gray-900 border-b pb-2 mb-3">Education</h2>
                        <p class="text-gray-700">{{ profile.education }}</p>
                    </div>

                    <!-- Skills -->
                    <div>
                        <h2 class="text-lg font-semibold text-gray-900 border-b pb-2 mb-3">Skills</h2>
                        <div class="flex flex-wrap gap-2">
                            {% for skill in profile.skills.split(', ') %}
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                {{ skill }}
                            </span>
                            {% endfor %}
                        </div>
                    </div>

                    <!-- LinkedIn Profile -->
                    <div class="border-t pt-4">
                        <a href="{{ profile.linkedin_url }}" target="_blank" class="inline-flex items-center text-blue-600 hover:text-blue-800">
                            <svg class="h-5 w-5 mr-2" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                            </svg>
                            View LinkedIn Profile
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Back to Search -->
    <div class="mt-6">
        <a href="{{ url_for('index') }}" class="inline-flex items-center text-blue-600 hover:text-blue-800">
            <svg class="h-5 w-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
            </svg>
            Back to search
        </a>
    </div>
</div>
{% endblock %}
